{% extends "layout.html" %}

{% block init_javascript %}
<script>
$(document).ready(function(){
    filedb_init_files_page();
});
</script>
{% endblock %}

{% block content %}

<script>
	$("#files_page").addClass('active');
</script>

<h1>Add Files</h1>

<div class="alert alert-info" role="alert"><strong>Notes:</strong>
    <ul>
        <li>What is imported/added depends on the FileDB configuration.</li>
        <li>Date and time are automatically extracted from JPEG files, but can be edited later.</li>
        <li>Edited JPEG files usually does not have the date and time information. FileDB will then try to extract this from the file path instead.</li>
        <li>GPS position is automatically extracted from JPEG files for automatically setting file location. Set GPS position for each location at the <a href="{{ url_for('app_categories') }}">Edit Categories page</a>.</li>
    </ul>
</div>

<div class="panel panel-default">
    <div class="panel-heading">Import Files</div>
    <div class="panel-body">
        <p><button type="submit" class="btn btn-default" id="import_button">Import...</button></p>
        <p id="import_status"></p>
    </div>
</div>

<div class="panel panel-default">
    <div class="panel-heading">Add Files</div>
    <div class="panel-body">
        <div class="alert alert-info" role="alert"><strong>Note:</strong> Paths are specified from within the configured file root directory.</div>
        <form action="{{ url_for('api_add_directory') }}" method=post class="navbar-form navbar-left" role="search" id="add_directory_form">
            <div class="form-group">
                <input type="text" class="form-control" placeholder="From directory path" name="path">
            </div>
            <button type="submit" class="btn btn-default">Add</button>
        </form>
        <form action="{{ url_for('api_add_file') }}" method=post class="navbar-form navbar-left" role="search" id="add_file_form">
            <div class="form-group">
                <input type="text" class="form-control" placeholder="From file path" name="path">
                <input type="text" class="form-control" placeholder="File description" name="description">
            </div>
            <button type="submit" class="btn btn-default">Add</button>
        </form>
        <p id="add_files_status" style="clear:both;"></p>
    </div>
</div>

<div class="panel panel-default">
    <div class="panel-heading">Tools</div>
    <div class="panel-body">
        <div class="form-group">
            <button type="button" class="btn btn-default navbar-btn" id="button_show_directories">List filesystem directories...</button>
            <button type="button" class="btn btn-default navbar-btn" id="button_show_all_files">List added files...</button>
            <button type="submit" class="btn btn-default" id="consistency_check_button">Run consistency check...</button>
        </div>
        <p id="files_status"></p>
        <table class="table" id="directoriestable"></table>
        <table class="table" id="filestable"></table>
    </div>
</div>

{% endblock %}
