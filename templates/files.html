{% extends "layout.html" %}
{% block content %}

<script>
	$("#files_page").addClass('active');
</script>

{% if session.logged_in %}

<h1>Files</h1>

<div class="panel panel-default">
    <div class="panel-heading">Add File(s)</div>
    <div class="panel-body">
        <form action="{{ url_for('api_add_directory') }}" method=post class="navbar-form navbar-left" role="search">
            <div class="form-group">
                <input type="text" class="form-control" placeholder="From directory path" name="path">
            </div>
            <button type="submit" class="btn btn-default">Add</button>
        </form>
        <form action="{{ url_for('api_add_file') }}" method=post class="navbar-form navbar-left" role="search">
            <div class="form-group">
                <input type="text" class="form-control" placeholder="From file path" name="path">
                <input type="text" class="form-control" placeholder="Description" name="description">
            </div>
            <button type="submit" class="btn btn-default">Add</button>
        </form>
    </div>
</div>

<table class="table" id="filestable">
    <tr><th>Path</th><th>Description</th><th>Date and Time</th></tr>
    {% for file in files %}
    <tr><td><a href="{{ url_for('api_get_file_content', id=file.id) }}">{{ file.path }}</a></td><td>{{ file.description|safe }}</td><td>{{ file.datetime|safe }}</td></tr>
    {% endfor %}
</table>

{% endif %}
{% endblock %}
